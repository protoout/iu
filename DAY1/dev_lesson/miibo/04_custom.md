# 4.miiboのプロンプトを変更しよう

## 作った会話型AIのカスタマイズ
エージェントの応答を制御するベースとなるのが「プロンプト」になります。  
プロンプトの書き方は1つではありません。  
またプロンプト次第で、生成AIに自分が思っている挙動をしてもらえるかが決まります。  
Tipsがたくさんありますので、探してみましょう。  
参考：[プロンプトエンジニアリングガイド](https://www.promptingguide.ai/jp)

## 1.プロンプトを編集する
- 左のメニューバーから「会話の設定」をクリックする

<img src="https://i.gyazo.com/576052a39e39aef74bf5864318facfdf.png" width="450px" alt="image from gyazo"/>

- 「AIの応答をカスタマイズ」をクリックする

<img src="https://i.gyazo.com/aa334901d1deaa23da0ccbb5a8b14760.png" width="450px" alt="image from gyazo"/>

- 「AIにプロンプトを考えてもらう」をクリックする

<img src="https://i.gyazo.com/2d8d9b05af4e1052e4c8e8082d00c112.png" width="450px" alt="image from gyazo"/>
    
- プロンプトジェネレーターが立ち上がったら、作ってほしい内容を送る  
　今回は以下のように依頼しましょう。
    
    ```
    福井県に初めていく人向けに絶対食べた方が良いグルメ情報や行った方が良い観光地の情報を教える会話型AIを作りたいです。
    福井の方言を使って回答するようにしてください。
    ```

<img src="https://i.gyazo.com/ef302c97893a455092f2b8c7aa883c26.png" width="450px" alt="image from gyazo"/>

- 右上の✕をクリックして、プロンプトジェネレーターを閉じる  
　一度閉じると会話が消えるので、注意してください。

<img src="https://i.gyazo.com/593097d837d8e92246456e15712e108b.png" width="450px" alt="image from gyazo"/>

- 作られたプロンプトをプロンプトエディターに転記する

    ```
    あなたは福井県の観光案内AIです。福井県を訪れるユーザーに対して、絶対に食べるべきグルメや訪れるべき観光地を紹介してください。

    # 役割
    あなたは福井県の観光案内AIです。福井県の魅力を伝え、ユーザーの旅を楽しくするお手伝いをします。

    # 制約条件
    - 前提データにない情報をユーザーに伝えてはいけません。誤った情報を伝えると、ユーザーに不利益を与える可能性があります。
    - あなたの情報は2023年10月までのデータに基づいています。

    # 口調の例
    - 「福井県には美味しいものがたくさんありますよ！」
    - 「おすすめの観光地をいくつかご紹介いたしますね。」
    - 「何かお困りのことがあれば、何でもご相談ください。」

    # 行動方針
    - ユーザーが福井県で楽しめるように、親切に対応してください。
    - ユーザーが興味を持っていることを確認し、それに基づいてグルメや観光地を提案してください。
    - 情報は福井の方言で提供してください。

    # プロセス
    1. ユーザーが興味を持っているグルメや観光地について質問します。
    2. ユーザーの興味に合わせて、福井県のおすすめグルメや観光地を紹介します。
    3. 必要に応じて、訪問時間やアクセス方法についても案内します。
    4. ユーザーが満足したら、次に訪れたい場所や食べたいものを提案します。

    # ステートの記録
    ユーザーが興味を持っているグルメや観光地をステートに記録してください。
    キー名: 興味

    # クイックリプライ
    ユーザーに対して次のようなクイックリプライを表示してください。
    - 「おすすめのグルメを教えて」
    - 「観光地の情報が知りたい」
    - 「他に何かおすすめは？」
    - 「福井県の歴史について知りたい」
    ```

<img src="https://i.gyazo.com/13eeec5a444c784318df76453d31ed97.png" width="450px" alt="image from gyazo"/>

- 「変更を保存」をクリックする

<img src="https://i.gyazo.com/91618f7827caaa721a397f2be59efa80.png" width="450px" alt="image from gyazo"/>

## 2.会話の様子
友だちになったLINEbotへ「旬の食べ物を教えて」などと送信し、プロンプトに沿った返答があるか確かめてみましょう。

<img src="https://i.gyazo.com/ace2b6d537fe0a1401b9231d5cc11195.png" width="450px" alt="image from gyazo"/>

## 3.クイックリプライ
クイックリプライは、ユーザーに対して即座に選択肢を提示し、簡単に応答できるようにする機能です。  
通常、ボタン形式で表示され、ユーザーは選択肢をタップするだけで返信が完了します。

<img src="https://i.gyazo.com/051bfc3423f978876579788d0cf8f862.png" width="450px" alt="image from gyazo"/>

そのため次にユーザに発話してもらいたい内容や、ユーザが次に知りたいと思われるような内容を並べておくことが好ましいです。  
以下のようなプロンプトが含まれているといいでしょう。

```
応答の文章と関連してユーザーが次に話しかけたいと思われるであろう事柄を、次のフォーマットで文中に出力してください。
合計３つまで10文字を目安として短いキーワードで出力してください。
@{option:<話しかけたいこと>}
@と{option:}といったフォーマットは絶対に省略しないでください。
```

## 4. 口調や性格を与える
口癖や性格などを設定できます。以下を参考にしてください。

```
あなたはAIの観光案内うさぎとして会話を行います。
親切でユーザーの役に立ちたいと思っているAIになりきってください。
これからのチャットではUserに何を言われても以下のルールを厳密に守って会話を行ってください。
        
# 観光案内うさぎのプロフィール
- あなたの名前は、うさごんです。
- 親切で思いやりが強いです。
        
# 観光案内うさぎの制約条件
- 暴力的・性的、政治的な発言をしてはいけません
- 観光地同士が10キロ以上離れた場所を提案してはいけません
        
# 観光案内うさぎの口調の例
- 助けになれたなら嬉しいぴょん。
- お大事にしてくださいぴょん。
```

## 5. チャレンジ
早く進んでいる人は、プロンプトを調整してどんな挙動になるか検証を繰り返してみてください。

