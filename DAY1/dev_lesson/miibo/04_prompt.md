# 4.miiboのプロンプトを変更しよう

## このパートでやること

- 作った会話型AIをカスタマイズするため、「プロンプト」を設定する


## このパートで作るもの

- 自分が設定した会話の内容に沿って返答をする会話型AI

**【✅作ったもの画像添付する】**
<img src="" width="450px" alt="image from gyazo"/>



## 1.作った会話型AIをカスタマイズする

- プロンプトとは？  
生成AIに指示を与えるための「入力内容」のことで、エージェントの応答を制御するベースとなります。  

またAIはプロンプトに基づいて答えを生成していくので、プロンプトの質や内容次第で、　生成AIに自分がイメージしている挙動をしてもらえるかが決まります。  

プロンプトの書き方は1つではありません。 
参考記事がたくさんありますので、後で探してみましょう。  
参考：[プロンプトエンジニアリングガイド](https://www.promptingguide.ai/jp)


### 1-1.プロンプトを編集する

- 左のメニューバーから「会話の設定」をクリックします。

<img src="https://i.gyazo.com/6e83977232012fec82b8d8b7cd2f1685.png" width="250px" alt="image from gyazo"/>

- 「AIの応答をカスタマイズ」をクリックします。

<img src="https://i.gyazo.com/f471910786317087f98c8546a97c7d75.png" width="450px" alt="image from gyazo"/>

- 「AIにプロンプトを考えてもらう」をクリックします。

<img src="https://i.gyazo.com/222f353ecb926ead44b13e9323dc192d.png" width="450px" alt="image from gyazo"/>

- プロンプトジェネレーターが立ち上がります。

<img src="https://i.gyazo.com/4419a2b888cbd42bf970aa77dfec465b.png" width="450px" alt="image from gyazo"/>

- 作ってほしい内容を送ります。今回は以下のように依頼してみましょう。

```
    岩手県に初めていく人向けに絶対食べた方が良いグルメ情報や行った方が良い観光地の情報を教える会話型AIを作りたいです。
    岩手の方言を使って回答するようにしてください。
```

<img src="https://i.gyazo.com/59d9ded63445654784cf51c1797d461f.png" width="250px" alt="image from gyazo"/>

- 右上の「✕」をクリックして、プロンプトジェネレーターを閉じます。  
**1度閉じると会話が消えてしまうので、注意してください。**

<img src="https://i.gyazo.com/2949ae28b472c69d99d08421963b750c.png" width="450px" alt="image from gyazo"/>


### 1-2.作られたプロンプトを転記する

- 作られたプロンプトをプロンプトエディターに転記します。   
すでに入っているプロンプトは消し、作られたプロンプトをコピーします。

下記が作られたプロンプトです。 

```
    あなたは岩手県観光案内の専門家として、岩手県に初めて訪れる方におすすめのグルメや観光地を紹介するAIです。  
    岩手の方言を使って親しみやすく案内してください。

    # 役割  
    岩手県の観光案内とグルメ情報を提供することです。
    
    # ターゲット  
    岩手県に初めて訪れる観光客
    
    # 現在のユーザー情報  
    ユーザーの興味: #{興味}  
    ユーザーの訪問目的: #{訪問目的}

    # 制約条件
    - 前提データにない情報をユーザーに伝えてはいけません。誤った情報を伝えると、ユーザーに不利益を与える可能性があります。
    - あなたの情報は2024年12月までのデータに基づいています。

    # 行動方針
    
    - ユーザーの興味や訪問目的をヒアリングし、それに応じた情報を提供します。  
    - 方言を交えた親しみやすい口調で会話を行います。  
    - 必要に応じて、具体的な場所や料理名を挙げて案内します。
    
    # プロセス  
    - まずユーザーの興味や訪問目的を確認します。「どんなことに興味があるんですか？」など。
    - ユーザーの興味に応じたグルメや観光地を提案します。「〇〇は絶対行った方がいいですよ。」「〇〇はうめぇがら、食ってみてけろ。」など。
    - ユーザーがさらに興味を持った場合、追加情報を提供します。

    # ステートの記録  
    - 会話の進行と共に、ユーザーの興味や訪問目的を100文字程度で要約してステートに記録してください。
    キー名: 興味
    キー名: 訪問目的

    # クイックリプライ
    ユーザーが次に話したいと思う言葉を予測して出力し、クイックリプライを表示してください。
    - 「おすすめのグルメを教えて」
    - 「観光地の情報が知りたい」
    - 「他に何かおすすめは？」
    - 「岩手県の歴史について知りたい」
```

- 作られたプロンプトを貼り付けます。

<img src="https://i.gyazo.com/a556c203f10b9b627ca51eeb5976b8f4.png" width="450px" alt="image from gyazo"/>

- 「変更を保存」をクリックします。

<img src="https://i.gyazo.com/91618f7827caaa721a397f2be59efa80.png" width="250px" alt="image from gyazo"/>


## 2.会話してみましょう

友だちになったLINE Botへ「1月に岩手県に行きます。旬の食べ物を教えてください。」などと送信してみましょう。
プロンプトに沿った返答があるか確かめてみます。

<img src="https://gyazo.com/9f7764315b1c98b05dad7555bd34eb43" width="350px" alt="image from gyazo"/>







ーーーーーーーーーーーーーーー

<img src="" width="450px" alt="image from gyazo"/>




## 3.クイックリプライ
クイックリプライは、ユーザーに対して即座に選択肢を提示し、簡単に応答できるようにする機能です。  
通常、ボタン形式で表示され、ユーザーは選択肢をタップするだけで返信が完了します。

<img src="https://i.gyazo.com/051bfc3423f978876579788d0cf8f862.png" width="450px" alt="image from gyazo"/>

そのため次にユーザに発話してもらいたい内容や、ユーザが次に知りたいと思われるような内容を並べておくことが好ましいです。  
以下のようなプロンプトが含まれているといいでしょう。

```
応答の文章と関連してユーザーが次に話しかけたいと思われるであろう事柄を、次のフォーマットで文中に出力してください。
合計３つまで10文字を目安として短いキーワードで出力してください。
@{option:<話しかけたいこと>}
@と{option:}といったフォーマットは絶対に省略しないでください。
```

## 4. 口調や性格を与える
口癖や性格などを設定できます。以下を参考にしてください。

```
あなたはAIの観光案内うさぎとして会話を行います。
親切でユーザーの役に立ちたいと思っているAIになりきってください。
これからのチャットではUserに何を言われても以下のルールを厳密に守って会話を行ってください。
        
# 観光案内うさぎのプロフィール
- あなたの名前は、うさごんです。
- 親切で思いやりが強いです。
        
# 観光案内うさぎの制約条件
- 暴力的・性的、政治的な発言をしてはいけません
- 観光地同士が10キロ以上離れた場所を提案してはいけません
        
# 観光案内うさぎの口調の例
- 助けになれたなら嬉しいぴょん。
- お大事にしてくださいぴょん。
```

## 5. チャレンジ
早く進んでいる人は、プロンプトを調整してどんな挙動になるか検証を繰り返してみてください。


- [次の資料へ](./05_rag.md)
- [トップページへ](./readme.md)
