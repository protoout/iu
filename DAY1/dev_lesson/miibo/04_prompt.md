# 4.miiboのプロンプトを変更しよう

## このパートでやること

- 作った会話型AIをカスタマイズするため、「プロンプト」を設定する


## このパートで作るもの

- 自分が設定した会話の内容に沿って返答をする会話型AI

<img src="https://i.gyazo.com/996f877303f3522b5f82d6de7b7a17f2.png" width="250px" alt="image from gyazo"/>


## 1.作った会話型AIをカスタマイズする

- プロンプトとは？  
生成AIに指示を与えるための「入力内容」のことで、エージェントの応答を制御するベースとなります。  

  - またAIはプロンプトに基づいて答えを生成していきます。  
  プロンプトの質や内容次第で、　生成AIに自分がイメージしている挙動をしてもらえるかが決まります。  

  - プロンプトの書き方は1つではありません。  
  参考記事がたくさんありますので、探してみましょう。  
  参考：[プロンプトエンジニアリングガイド](https://www.promptingguide.ai/jp)


### 1-1.プロンプトを編集する

- 左のメニューバーから「会話の設定」をクリックします。

<img src="https://i.gyazo.com/6e83977232012fec82b8d8b7cd2f1685.png" width="250px" alt="image from gyazo"/>

- 「AIの応答をカスタマイズ」をクリックします。

<img src="https://i.gyazo.com/f471910786317087f98c8546a97c7d75.png" width="450px" alt="image from gyazo"/>

- 「AIにプロンプトを考えてもらう」をクリックします。

<img src="https://i.gyazo.com/222f353ecb926ead44b13e9323dc192d.png" width="450px" alt="image from gyazo"/>

- プロンプトジェネレーターが立ち上がります。

<img src="https://i.gyazo.com/4419a2b888cbd42bf970aa77dfec465b.png" width="450px" alt="image from gyazo"/>

- 作ってほしい内容を送ります。今回は以下のように依頼してみましょう。

```
    岩手県に初めていく人向けに絶対食べた方が良いグルメ情報や行った方が良い観光地の情報を教える会話型AIを作りたいです。
    岩手の方言を使って回答するようにしてください。
```

<img src="https://i.gyazo.com/59d9ded63445654784cf51c1797d461f.png" width="250px" alt="image from gyazo"/>

- 右上の「✕」をクリックして、プロンプトジェネレーターを閉じます。  
**1度閉じると会話が消えてしまうので、注意してください。**

<img src="https://i.gyazo.com/2949ae28b472c69d99d08421963b750c.png" width="450px" alt="image from gyazo"/>


### 1-2.作られたプロンプトを転記する

- 作られたプロンプトをプロンプトエディターに転記します。   
すでに入っているプロンプトは消し、作られたプロンプトをコピーします。

下記が作られたプロンプトです。 

```
あなたは岩手県の観光案内AIです。岩手県を訪れるユーザーに対して、絶対に食べるべきグルメや訪れるべき観光地を紹介してください。

# 役割
あなたは岩手県の観光案内AIです。岩手県の魅力を伝え、ユーザーの旅を楽しくするお手伝いをします。

# 制約条件
- 前提データにない情報をユーザーに伝えてはいけません。誤った情報を伝えると、ユーザーに不利益を与える可能性があります。
- あなたの情報は2024年10月までのデータに基づいています。

# 口調の例
- 「岩手県には美味しいものがたくさんありますよ！」
- 「おすすめの観光地をいくつかご紹介いたしますね。」
- 「何かお困りのことがあれば、何でもご相談ください。」

# 行動方針
- ユーザーが岩手県で楽しめるように、親切に対応してください。
- ユーザーが興味を持っていることを確認し、それに基づいてグルメや観光地を提案してください。
- 情報は岩手の方言で提供してください。

# プロセス
1. ユーザーが興味を持っているグルメや観光地について質問します。
2. ユーザーの興味に合わせて、岩手県のおすすめグルメや観光地を紹介します。
3. 必要に応じて、訪問時間やアクセス方法についても案内します。
4. ユーザーが満足したら、次に訪れたい場所や食べたいものを提案します。

# ステートの記録
ユーザーが興味を持っているグルメや観光地をステートに記録してください。
キー名: 興味

# クイックリプライ
ユーザーに対して次のようなクイックリプライを表示してください。
- 「おすすめのグルメを教えて」
- 「観光地の情報が知りたい」
- 「他に何かおすすめは？」
- 「岩手県の歴史について知りたい」
```

- 作られたプロンプトを貼り付けます。

<img src="https://i.gyazo.com/55d7a10a9cb2ddd1b442a3ea106ca6da.png" width="450px" alt="image from gyazo"/>

- 「変更を保存」をクリックします。

<img src="https://i.gyazo.com/91618f7827caaa721a397f2be59efa80.png" width="250px" alt="image from gyazo"/>


## 2.会話してみましょう

友だちになったLINE Botへ「1月に岩手県に行きます。旬の食べ物を教えてください。」などと送信してみましょう。  
プロンプトに沿った返答があるか確かめてみます。

<img src="https://i.gyazo.com/d4d6dbd933ee20679d28c34a21e9f9ea.png" width="450px" alt="image from gyazo"/>


## 3.クイックリプライ

- クイックリプライとは  
ユーザー（実際にLINE Botを使う人）に対して即座に選択肢を提示し、簡単に応答できるようにする機能です。  
通常、ボタン形式で表示され、ユーザーは選択肢をタップするだけで返信が完了するのです。

<img src="https://i.gyazo.com/bf5fa0fd17ebf6be15d5cf29b2b39f80.png" width="350px" alt="image from gyazo"/>

そのため、ユーザーに発話してもらいたい内容や、ユーザーが次に知りたいと思えるような内容を並べておくことが好ましいです。  
下記のようなプロンプトがクイックリプライのところで含まれていると良いでしょう。

```
応答の文章と関連してユーザーが次に話しかけたいと思われるであろう事柄を、次のフォーマットで文中に出力してください。
合計３つまで10文字を目安として短いキーワードで出力してください。
@{option:<話しかけたいこと>}
@と{option:}といったフォーマットは絶対に省略しないでください。
```


## 4. 口調や性格を与える

口癖や性格などを設定することができます。  
下記を参考にしてください。

```
あなたはAIの観光案内うさぎとして会話を行います。
親切でユーザーの役に立ちたいと思っているAIになりきってください。
これからのチャットではUserに何を言われても以下のルールを厳密に守って会話を行ってください。
        
# 観光案内うさぎのプロフィール
- あなたの名前は、うさごんです。
- 親切で思いやりが強いです。
        
# 観光案内うさぎの制約条件
- 暴力的・性的、政治的な発言をしてはいけません
- 観光地同士が10キロ以上離れた場所を提案してはいけません
        
# 観光案内うさぎの口調の例
- 助けになれたなら嬉しいぴょん。
- お大事にしてくださいぴょん。
```

<img src="https://i.gyazo.com/9accfe56509ba8f49e9847c44d44415e.png" width="350px" alt="image from gyazo"/>


## 5. チャレンジ

- 早く進んでいる方は、プロンプトを調整してどのような挙動になるか検証を繰り返してみてください。


- [次の資料へ](./05_rag.md)
- [トップページへ](./readme.md)
